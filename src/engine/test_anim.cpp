//========================================================================
//	file:		test_anim.cpp
//	author:		Shawn Presser 
//
// (c) 2010 Shawn Presser.  All Rights Reserved.
//========================================================================

//========================================================================
// Headers
//========================================================================
#include "e_common.h"
#include "test_anim.h"

// graphics headers.
#include "gr_anim.h"
#include "gr_anim_node.h"

// math headers.
#include "m_mat33.h"
#include "m_vec3.h"
#include "m_transform.h"
//========================================================================

//===================
// TestAnim::Test
//===================
GrAnim*			TestAnim::Test(float animLength)
{
	// only one frame.
	GrAnim* result = E_NEW("test_anim", GrAnim)(_T("test_walk_1"));

#if 0
#define TRACK_ROT(percent_pitch, percent_roll, percent_yaw) \
	MMat33::FromAngles(PERCENT_TO_ANGLE(percent_pitch##f), PERCENT_TO_ANGLE(percent_roll##f), PERCENT_TO_ANGLE(percent_yaw##f))

#define TRACK_TRANS(x, y, z) \
	MVec3(x##f, y##f, z##f)

#define ADD_TRACK(name, rot, trans) \
	{ \
		MTransform ADD_TRACK_track(rot, trans); \
		result->GetTrack(_T(name)).Reset(&ADD_TRACK_track, 1, animLength); \
	}

	// first frame of each track.
	ADD_TRACK("Bip01",
		TRACK_ROT( -0.000,  3.944,-25.167), TRACK_TRANS(0.0000000,1.1290781,42.8515244))
		//TRACK_ROT( -0.000,  3.944,-25.167), TRACK_TRANS(0.0000000,0.0000000,42.8515244))

	ADD_TRACK("Bip01 Pelvis",
		TRACK_ROT(-49.317,-22.878, 22.670), TRACK_TRANS(0.0000001,0.0000000,-0.0000014))

#if 1
	ADD_TRACK("Bip01 Head",
		TRACK_ROT( -7.055,  2.499,-10.595), TRACK_TRANS(2.3001273,0.0000015,0.0000003))

	ADD_TRACK("Bip01 L Calf",
		TRACK_ROT(  0.000, -0.000,-28.152), TRACK_TRANS(20.2215195,-0.0000016,-0.0000003))

	ADD_TRACK("Bip01 L Clavicle",
		TRACK_ROT(-37.637,-25.000,  0.000), TRACK_TRANS(-6.0950122,4.8666463,7.4165707))

	ADD_TRACK("Bip01 L Finger0",
		TRACK_ROT(-32.386, -2.345, 14.486), TRACK_TRANS(0.5230170,3.9405515,-4.1224446))

	ADD_TRACK("Bip01 L Finger01",
		TRACK_ROT( -0.000, -0.000, 11.141), TRACK_TRANS(4.0616331,-0.0000007,0.0000012))

	ADD_TRACK("Bip01 L Finger1",
		TRACK_ROT( -0.700,-10.738, 35.890), TRACK_TRANS(8.0378428,2.2607849,-4.3359594))

	ADD_TRACK("Bip01 L Finger11",
		TRACK_ROT( -0.000, -0.000, -0.000), TRACK_TRANS(2.3656805,-0.0000016,0.0000008))

	ADD_TRACK("Bip01 L Finger2",
		TRACK_ROT(  6.136,  0.005,  6.520), TRACK_TRANS(8.5799894,0.9682137,-1.9448786))

	ADD_TRACK("Bip01 L Finger21",
		TRACK_ROT( -0.000, -0.000,  0.000), TRACK_TRANS(2.9434407,0.0000034,-0.0000011))

	ADD_TRACK("Bip01 L Finger3",
		TRACK_ROT(  0.228, -1.757,  7.084), TRACK_TRANS(8.4034710,0.0034094,0.7563047))

	ADD_TRACK("Bip01 L Finger31",
		TRACK_ROT( -0.000,  0.000, -0.000), TRACK_TRANS(2.8612542,0.0000015,-0.0000009))

	ADD_TRACK("Bip01 L Finger4",
		TRACK_ROT(  0.177, -1.628,  9.085), TRACK_TRANS(8.1849451,-0.9998163,3.4767647))

	ADD_TRACK("Bip01 L Finger41",
		TRACK_ROT(  0.000,  0.000,  0.000), TRACK_TRANS(2.1024535,-0.0000004,-0.0000030))

	ADD_TRACK("Bip01 L Foot",
		TRACK_ROT(  1.112,  2.955, -3.518), TRACK_TRANS(21.1981888,-0.0000004,0.0000004))

	ADD_TRACK("Bip01 L Forearm",
		TRACK_ROT( -0.000,  0.000,-13.323), TRACK_TRANS(13.2260647,0.0000005,-0.0000010))

	ADD_TRACK("Bip01 L Hand",
		TRACK_ROT( 30.474, 19.579,-18.705), TRACK_TRANS(19.7067070,0.0000020,-0.0000002))

	ADD_TRACK("Bip01 L Thigh",
		TRACK_ROT(-48.771, -0.060, 15.436), TRACK_TRANS(-4.4877224,3.7873986,5.9730864))

	ADD_TRACK("Bip01 L Toe0",
		TRACK_ROT( -0.000, -0.000, 25.000), TRACK_TRANS(6.7211766,9.3065195,0.0000003))

	ADD_TRACK("Bip01 L UpperArm",
		TRACK_ROT(  6.984, 11.844,  3.263), TRACK_TRANS(6.6273746,0.0000003,0.0000017))

	ADD_TRACK("Bip01 Neck",
		TRACK_ROT( -0.000, -0.000, 12.351), TRACK_TRANS(15.1075878,0.7957819,-0.0000019))

	ADD_TRACK("Bip01 R Calf",
		TRACK_ROT(  0.000,  0.000, -0.029), TRACK_TRANS(20.2215214,0.0000011,0.0000006))

	ADD_TRACK("Bip01 R Clavicle",
		TRACK_ROT( 37.637, 25.000,  0.000), TRACK_TRANS(-6.0950127,4.8666849,-7.4165335))

	ADD_TRACK("Bip01 R Foot",
		TRACK_ROT( -9.380, -1.939, -3.931), TRACK_TRANS(21.1981907,-0.0000026,0.0000023))

	ADD_TRACK("Bip01 R Forearm",
		TRACK_ROT( -0.000,  0.000,-23.894), TRACK_TRANS(13.2260637,-0.0000000,0.0000007))

	ADD_TRACK("Bip01 R Hand",
		TRACK_ROT( 12.779,  5.160,  2.370), TRACK_TRANS(17.7838535,-0.0000025,-0.0000030))

	ADD_TRACK("Bip01 R Thigh",
		TRACK_ROT( 38.043, -2.268,-40.917), TRACK_TRANS(-4.5687547,-0.1673817,-5.7598691))

	ADD_TRACK("Bip01 R Toe0",
		TRACK_ROT( -0.000, -0.000, 24.979), TRACK_TRANS(6.7211776,9.3065195,-0.0000001))

	ADD_TRACK("Bip01 R UpperArm",
		TRACK_ROT(  4.224,-11.957,  5.834), TRACK_TRANS(6.6273746,-0.0000012,-0.0000006))

	ADD_TRACK("Bip01 Spine",
		TRACK_ROT(  5.174, -0.110,  6.359), TRACK_TRANS(4.8300080,0.2039410,-0.6495020))

	ADD_TRACK("Bip01 Spine1",
		TRACK_ROT(  3.591, -2.215,  2.704), TRACK_TRANS(7.3496604,-0.0056211,-0.0013093))

	ADD_TRACK("Bip01 Spine2",
		TRACK_ROT(  1.682,  1.184, -2.838), TRACK_TRANS(7.3476639,-0.0057246,-0.0006177))

	ADD_TRACK("Box01",
		TRACK_ROT(-48.859,-15.148,  5.491), TRACK_TRANS(-12.8343449,-21.6269875,12.4494476))

	ADD_TRACK("Box02",
		TRACK_ROT(-40.740,  2.071,-48.195), TRACK_TRANS(5.0190554,-11.6440287,20.8891945))

	ADD_TRACK("Box03",
		TRACK_ROT( 39.724, -6.563,-45.103), TRACK_TRANS(-6.0828881,-4.4460578,-16.9738274))

	ADD_TRACK("Box04",
		TRACK_ROT( -1.503,  6.557, -4.180), TRACK_TRANS(-0.0000016,0.0000054,13.4413462))

	ADD_TRACK("Box05",
		TRACK_ROT( 29.796, -4.366,-41.041), TRACK_TRANS(-6.7326012,-12.3143396,-8.8309174))

	ADD_TRACK("Box06",
		TRACK_ROT( -3.902,  5.518, -3.554), TRACK_TRANS(0.0000048,0.0000034,12.5871086))

	ADD_TRACK("Box07",
		TRACK_ROT( 11.785, -6.391,  0.557), TRACK_TRANS(-6.0829420,-4.4459658,16.9738388))

	ADD_TRACK("Box08",
		TRACK_ROT(  0.926, -0.640, -0.039), TRACK_TRANS(-0.0000042,-0.0000004,13.4413452))

	ADD_TRACK("Box09",
		TRACK_ROT( 15.962,-11.136,  5.662), TRACK_TRANS(-6.7326241,-12.3142948,8.8309679))

	ADD_TRACK("Box10",
		TRACK_ROT( -0.278, -1.916,  0.512), TRACK_TRANS(0.0000005,-0.0000016,12.5871058))

	ADD_TRACK("Box11",
		TRACK_ROT( 16.440, 15.102, -8.089), TRACK_TRANS(4.2392340,-3.8447418,2.3376770))

	ADD_TRACK("Box12",
		TRACK_ROT(  4.780, -3.601, -0.428), TRACK_TRANS(0.0000086,0.0000046,8.9043579))

	ADD_TRACK("Box13",
		TRACK_ROT( -0.368,-16.708,-46.250), TRACK_TRANS(8.5638819,1.0806088,-5.7646790))

	ADD_TRACK("Box14",
		TRACK_ROT( 49.968,-13.688,  0.037), TRACK_TRANS(8.5638876,1.0805686,5.7646813))

	ADD_TRACK("Box15",
		TRACK_ROT( -2.902,  2.216,-14.832), TRACK_TRANS(5.7885623,0.7255773,5.1416554))

	ADD_TRACK("Box16",
		TRACK_ROT(-48.372, -6.481,-13.058), TRACK_TRANS(4.6889720,-1.3720194,-5.5270391))

	ADD_TRACK("Box17",
		TRACK_ROT(-26.882,  9.595,  8.589), TRACK_TRANS(1.1754814,-6.3495188,0.1033403))

	ADD_TRACK("Box18",
		TRACK_ROT( -0.000, -0.000, -0.000), TRACK_TRANS(0.0000001,-0.0000043,33.3041077))

	ADD_TRACK("Scene Root",
		TRACK_ROT(  0.000, -0.000, -0.000), TRACK_TRANS(0.0000000,0.0000000,0.0000000))

	ADD_TRACK("_bone_back",
		TRACK_ROT(-49.987,-25.000,  0.000), TRACK_TRANS(6.8120990,-10.1636801,-0.0000126))

	ADD_TRACK("_bone_center",
		TRACK_ROT( -0.000,  0.000, 25.000), TRACK_TRANS(0.0000001,0.0000002,-0.0000014))

	ADD_TRACK("_bone_centerofchest",
		TRACK_ROT(-49.987,-25.000,  0.000), TRACK_TRANS(6.2435536,-0.0049726,0.0000002))

	ADD_TRACK("_bone_chest",
		TRACK_ROT(-49.987,-25.000,  0.000), TRACK_TRANS(7.4334793,8.3036251,0.0000166))

	ADD_TRACK("_bone_fx_01",
		TRACK_ROT( -0.372,  1.226, -0.018), TRACK_TRANS(-1.7824181,0.0008759,18.6735992))

	ADD_TRACK("_bone_head",
		TRACK_ROT(-41.295,-25.000,  0.000), TRACK_TRANS(3.8905468,-0.8244376,0.0000032))

	ADD_TRACK("_bone_lefteye",
		TRACK_ROT(-41.295,-25.000,  0.000), TRACK_TRANS(5.0184021,2.5830176,1.6249495))

	ADD_TRACK("_bone_leftfoot",
		TRACK_ROT( 46.723, 21.241,  2.970), TRACK_TRANS(20.6837711,0.2947904,-0.0303995))

	ADD_TRACK("_bone_lefthand01",
		TRACK_ROT( -3.928,-22.584,  2.784), TRACK_TRANS(16.1213112,-0.8852940,1.0389735))

	ADD_TRACK("_bone_origin",
		TRACK_ROT(  0.000, -0.000, -0.000), TRACK_TRANS(0.0000000,0.0000000,0.0000000))

	ADD_TRACK("_bone_overhead",
		TRACK_ROT(  0.000, -0.000, -0.000), TRACK_TRANS(-0.0000005,0.2511353,111.3974762))

	ADD_TRACK("_bone_righteye",
		TRACK_ROT(-41.295,-25.000,  0.000), TRACK_TRANS(5.0183945,2.5830231,-1.6249985))

	ADD_TRACK("_bone_rightfoot",
		TRACK_ROT(  3.277, 21.241,-47.030), TRACK_TRANS(20.6837711,0.2947888,0.0304033))

	ADD_TRACK("_bone_righthand",
		TRACK_ROT(  4.680,-25.000,  0.000), TRACK_TRANS(13.3183928,0.2434694,0.6347137))

	ADD_TRACK("_bone_weapon1",
		TRACK_ROT(-49.951,  0.000,  0.000), TRACK_TRANS(-0.0000031,-0.0235969,-7.6268001))

	ADD_TRACK("_bone_weapon2",
		TRACK_ROT(-49.951,  0.000,  0.000), TRACK_TRANS(-0.0000046,0.0321634,10.3938093))

	ADD_TRACK("_bone_weapon3",
		TRACK_ROT(-49.951,  0.000,  0.000), TRACK_TRANS(-0.0000074,0.0964622,31.1737328))

	ADD_TRACK("_bone_weaponattach",
		TRACK_ROT(  4.680,-25.000,  0.000), TRACK_TRANS(13.3183928,0.2434694,0.6347137))
#endif

	result->Finalize();

#if E_PRINT_DEBUG_INFO
	result->PrintDebug();
#endif
#endif

	return result;
}